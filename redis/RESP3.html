<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.61" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://vuepress-theme-hope-docs-demo.netlify.app/redis/RESP3.html"><meta property="og:site_name" content="码农参上"><meta property="og:title" content="Redis6通信协议升级至RESP3，一口气看完13种新数据类型"><meta property="og:description" content="在前面的文章 Redis：我是如何与客户端进行通信的中，我们介绍过RESP V2版本协议的规范，RESP的全程是Redis Serialization Protocol，基于这个实现简单且解析性能优秀的通信协议，Redis的服务端与客户端可以通过底层命令的方式进行数据的通信。 随着Redis版本的不断更新以及功能迭代，RESP V2协议开始渐渐无法满足..."><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2023-04-03T05:56:54.000Z"><meta property="article:author" content="Hydra"><meta property="article:tag" content="RESP3"><meta property="article:tag" content="Redis"><meta property="article:published_time" content="2022-04-21T00:00:00.000Z"><meta property="article:modified_time" content="2023-04-03T05:56:54.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"Redis6通信协议升级至RESP3，一口气看完13种新数据类型","image":[""],"datePublished":"2022-04-21T00:00:00.000Z","dateModified":"2023-04-03T05:56:54.000Z","author":[{"@type":"Person","name":"Hydra"}]}</script><title>Redis6通信协议升级至RESP3，一口气看完13种新数据类型 | 码农参上</title><meta name="description" content="在前面的文章 Redis：我是如何与客户端进行通信的中，我们介绍过RESP V2版本协议的规范，RESP的全程是Redis Serialization Protocol，基于这个实现简单且解析性能优秀的通信协议，Redis的服务端与客户端可以通过底层命令的方式进行数据的通信。 随着Redis版本的不断更新以及功能迭代，RESP V2协议开始渐渐无法满足...">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d1e1f;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/assets/style-a0c387d4.css" as="style"><link rel="stylesheet" href="/assets/style-a0c387d4.css">
    <link rel="modulepreload" href="/assets/app-ba0ddab3.js"><link rel="modulepreload" href="/assets/framework-9e67db09.js"><link rel="modulepreload" href="/assets/RESP3.html-07bab260.js"><link rel="modulepreload" href="/assets/RESP3.html-34eb690d.js"><link rel="prefetch" href="/assets/index.html-c52d4514.js" as="script"><link rel="prefetch" href="/assets/aboutMe.html-f2d767ad.js" as="script"><link rel="prefetch" href="/assets/JDK15.html-e80cc6ca.js" as="script"><link rel="prefetch" href="/assets/JNI.html-9d6aaf79.js" as="script"><link rel="prefetch" href="/assets/JavaAgent.html-5cb144ea.js" as="script"><link rel="prefetch" href="/assets/Proxy.html-1215ffef.js" as="script"><link rel="prefetch" href="/assets/dynamicProxy.html-6db9ce2c.js" as="script"><link rel="prefetch" href="/assets/javaMemoryLayout.html-ab0fb9b3.js" as="script"><link rel="prefetch" href="/assets/unsafe.html-554e90b7.js" as="script"><link rel="prefetch" href="/assets/Neo4j.html-220120ba.js" as="script"><link rel="prefetch" href="/assets/bayes.html-c5b94c5c.js" as="script"><link rel="prefetch" href="/assets/knowledgeGraph.html-4c6c26f7.js" as="script"><link rel="prefetch" href="/assets/wenxin.html-ca73dc2c.js" as="script"><link rel="prefetch" href="/assets/ArrayBlockingQueue.html-47e4bf86.js" as="script"><link rel="prefetch" href="/assets/DelayQueue.html-bc395b13.js" as="script"><link rel="prefetch" href="/assets/LinkedBlockingQueue.html-2810a694.js" as="script"><link rel="prefetch" href="/assets/PriorityBlockingQueue.html-7bb0a114.js" as="script"><link rel="prefetch" href="/assets/SynchronousQueueFair.html-a350e98d.js" as="script"><link rel="prefetch" href="/assets/SynchronousQueueUnfair.html-2d0ab75e.js" as="script"><link rel="prefetch" href="/assets/gcAnimate.html-635f8666.js" as="script"><link rel="prefetch" href="/assets/OAuth2Code.html-bcbc29a5.js" as="script"><link rel="prefetch" href="/assets/ShiroJWT.html-2d672e85.js" as="script"><link rel="prefetch" href="/assets/tokenUse.html-0a5c8e6a.js" as="script"><link rel="prefetch" href="/assets/AQS.html-1691e707.js" as="script"><link rel="prefetch" href="/assets/CountDownLatchCyclicBarrier.html-34dacbfd.js" as="script"><link rel="prefetch" href="/assets/HashMap.html-191c8bf1.js" as="script"><link rel="prefetch" href="/assets/cas.html-7598d761.js" as="script"><link rel="prefetch" href="/assets/requestMerge.html-ea1e598e.js" as="script"><link rel="prefetch" href="/assets/singleton.html-202ae451.js" as="script"><link rel="prefetch" href="/assets/synchronizedUp.html-a876d731.js" as="script"><link rel="prefetch" href="/assets/synchronizedvolatile.html-994d0058.js" as="script"><link rel="prefetch" href="/assets/WhyIHateFrameworks.html-863e8452.js" as="script"><link rel="prefetch" href="/assets/cannotUnderstand.html-33f67bb5.js" as="script"><link rel="prefetch" href="/assets/grandHistory.html-51514bad.js" as="script"><link rel="prefetch" href="/assets/mofish.html-426941ce.js" as="script"><link rel="prefetch" href="/assets/netren.html-d2ec58fd.js" as="script"><link rel="prefetch" href="/assets/qingdao.html-5041f501.js" as="script"><link rel="prefetch" href="/assets/traffickingAnxiety.html-b5011e4f.js" as="script"><link rel="prefetch" href="/assets/RedisAcid.html-87f51b49.js" as="script"><link rel="prefetch" href="/assets/StringLowLevel.html-eb67864e.js" as="script"><link rel="prefetch" href="/assets/deserialization.html-a3e30cab.js" as="script"><link rel="prefetch" href="/assets/forCircle.html-6db0ef6f.js" as="script"><link rel="prefetch" href="/assets/genericType.html-b0b2cf83.js" as="script"><link rel="prefetch" href="/assets/stringappend.html-61b5e16e.js" as="script"><link rel="prefetch" href="/assets/MyBatisExt.html-6bd9ab17.js" as="script"><link rel="prefetch" href="/assets/executeProcess.html-2ca8ee29.js" as="script"><link rel="prefetch" href="/assets/interceptor.html-aeaee6eb.js" as="script"><link rel="prefetch" href="/assets/join.html-9c84e8ef.js" as="script"><link rel="prefetch" href="/assets/multiTenancy.html-383569a3.js" as="script"><link rel="prefetch" href="/assets/multiTenancyAdvanced.html-9e9129c7.js" as="script"><link rel="prefetch" href="/assets/BatchSqlOptimize.html-5741a370.js" as="script"><link rel="prefetch" href="/assets/MysqlBinlogJava.html-23534163.js" as="script"><link rel="prefetch" href="/assets/ShardingSphere.html-e49519db.js" as="script"><link rel="prefetch" href="/assets/hideColumns.html-8c07dac3.js" as="script"><link rel="prefetch" href="/assets/rmrf.html-cf8eced2.js" as="script"><link rel="prefetch" href="/assets/transaction.html-75dcd152.js" as="script"><link rel="prefetch" href="/assets/BeanCopy.html-2e2cf9c4.js" as="script"><link rel="prefetch" href="/assets/ConfigurationCenter.html-28b210fc.js" as="script"><link rel="prefetch" href="/assets/DockerMining.html-def65b36.js" as="script"><link rel="prefetch" href="/assets/GuavaMap.html-d3e8e15b.js" as="script"><link rel="prefetch" href="/assets/HystrixRateLimite.html-95aad7ba.js" as="script"><link rel="prefetch" href="/assets/JavaQuasar.html-3e675278.js" as="script"><link rel="prefetch" href="/assets/NettyChat.html-6aad83cb.js" as="script"><link rel="prefetch" href="/assets/NettyRPC.html-afa37360.js" as="script"><link rel="prefetch" href="/assets/Postman.html-ed367a85.js" as="script"><link rel="prefetch" href="/assets/XxlJobModify.html-76f9df17.js" as="script"><link rel="prefetch" href="/assets/ZookeeperDistributedLock.html-4bd53f05.js" as="script"><link rel="prefetch" href="/assets/Cluster.html-c1d3bf40.js" as="script"><link rel="prefetch" href="/assets/RESP2.html-30d553c4.js" as="script"><link rel="prefetch" href="/assets/Redis6ClientSideCache.html-831eee74.js" as="script"><link rel="prefetch" href="/assets/RedisPlusCaffeine.html-5d210b73.js" as="script"><link rel="prefetch" href="/assets/RedissonCloseOrder.html-1b1ca041.js" as="script"><link rel="prefetch" href="/assets/SpringImplementCaffeinePlusRedis.html-c8f9eda3.js" as="script"><link rel="prefetch" href="/assets/WindowsCompileRedis.html-d189d724.js" as="script"><link rel="prefetch" href="/assets/clientSideCaching.html-85e3f924.js" as="script"><link rel="prefetch" href="/assets/distribute.html-e662284f.js" as="script"><link rel="prefetch" href="/assets/extendDataType.html-a09a3d91.js" as="script"><link rel="prefetch" href="/assets/guard.html-78c7be3f.js" as="script"><link rel="prefetch" href="/assets/mastersSlave.html-842cf22d.js" as="script"><link rel="prefetch" href="/assets/threePro.html-98b97b9e.js" as="script"><link rel="prefetch" href="/assets/InitializateBean.html-60a847db.js" as="script"><link rel="prefetch" href="/assets/SpringBootYmlParse.html-f87235b6.js" as="script"><link rel="prefetch" href="/assets/circleDependency.html-4d2c9caf.js" as="script"><link rel="prefetch" href="/assets/collectAutowired.html-bdc1a2c3.js" as="script"><link rel="prefetch" href="/assets/containerInit.html-014680d0.js" as="script"><link rel="prefetch" href="/assets/processor.html-930d1d34.js" as="script"><link rel="prefetch" href="/assets/ymlRead.html-93805451.js" as="script"><link rel="prefetch" href="/assets/zeroConfig.html-8d28de44.js" as="script"><link rel="prefetch" href="/assets/Eureka.html-6e95f60c.js" as="script"><link rel="prefetch" href="/assets/Feign.html-dacac695.js" as="script"><link rel="prefetch" href="/assets/Ribbon.html-f67875a7.js" as="script"><link rel="prefetch" href="/assets/Seata.html-06851c81.js" as="script"><link rel="prefetch" href="/assets/SeataTCC.html-bbfe34e6.js" as="script"><link rel="prefetch" href="/assets/SentinelRulePersistence.html-2033b523.js" as="script"><link rel="prefetch" href="/assets/SentinelUse.html-b59cd530.js" as="script"><link rel="prefetch" href="/assets/tokenOptimize.html-b4725a41.js" as="script"><link rel="prefetch" href="/assets/authLogin.html-6404e742.js" as="script"><link rel="prefetch" href="/assets/payment.html-bd666e49.js" as="script"><link rel="prefetch" href="/assets/refund.html-0d3cbf88.js" as="script"><link rel="prefetch" href="/assets/404.html-570934d7.js" as="script"><link rel="prefetch" href="/assets/index.html-880a87ac.js" as="script"><link rel="prefetch" href="/assets/index.html-530bda9a.js" as="script"><link rel="prefetch" href="/assets/index.html-c53b7f02.js" as="script"><link rel="prefetch" href="/assets/index.html-0954684a.js" as="script"><link rel="prefetch" href="/assets/index.html-1c7040c3.js" as="script"><link rel="prefetch" href="/assets/index.html-b2ee7e8f.js" as="script"><link rel="prefetch" href="/assets/index.html-b23605fc.js" as="script"><link rel="prefetch" href="/assets/index.html-ab0dd751.js" as="script"><link rel="prefetch" href="/assets/index.html-17cd0bce.js" as="script"><link rel="prefetch" href="/assets/index.html-5b58eb0b.js" as="script"><link rel="prefetch" href="/assets/index.html-73fea25d.js" as="script"><link rel="prefetch" href="/assets/index.html-b56d372b.js" as="script"><link rel="prefetch" href="/assets/index.html-31c2d841.js" as="script"><link rel="prefetch" href="/assets/index.html-8bcfaf59.js" as="script"><link rel="prefetch" href="/assets/index.html-b333b4e2.js" as="script"><link rel="prefetch" href="/assets/aboutMe.html-a4e40d1a.js" as="script"><link rel="prefetch" href="/assets/JDK15.html-6652af88.js" as="script"><link rel="prefetch" href="/assets/JNI.html-c75fe16e.js" as="script"><link rel="prefetch" href="/assets/JavaAgent.html-9f9eab57.js" as="script"><link rel="prefetch" href="/assets/Proxy.html-0e3db8cd.js" as="script"><link rel="prefetch" href="/assets/dynamicProxy.html-1a1dc17b.js" as="script"><link rel="prefetch" href="/assets/javaMemoryLayout.html-6c5f45e8.js" as="script"><link rel="prefetch" href="/assets/unsafe.html-a00c51b0.js" as="script"><link rel="prefetch" href="/assets/Neo4j.html-1cda5c93.js" as="script"><link rel="prefetch" href="/assets/bayes.html-bd5636c9.js" as="script"><link rel="prefetch" href="/assets/knowledgeGraph.html-68f796a8.js" as="script"><link rel="prefetch" href="/assets/wenxin.html-e656ae03.js" as="script"><link rel="prefetch" href="/assets/ArrayBlockingQueue.html-de74e73b.js" as="script"><link rel="prefetch" href="/assets/DelayQueue.html-a0bc801f.js" as="script"><link rel="prefetch" href="/assets/LinkedBlockingQueue.html-306c06f0.js" as="script"><link rel="prefetch" href="/assets/PriorityBlockingQueue.html-e9d25178.js" as="script"><link rel="prefetch" href="/assets/SynchronousQueueFair.html-ff0d26c0.js" as="script"><link rel="prefetch" href="/assets/SynchronousQueueUnfair.html-1300fd4b.js" as="script"><link rel="prefetch" href="/assets/gcAnimate.html-90362a7c.js" as="script"><link rel="prefetch" href="/assets/OAuth2Code.html-ced60c1f.js" as="script"><link rel="prefetch" href="/assets/ShiroJWT.html-99c8cd97.js" as="script"><link rel="prefetch" href="/assets/tokenUse.html-fb9e89c5.js" as="script"><link rel="prefetch" href="/assets/AQS.html-5fdfa651.js" as="script"><link rel="prefetch" href="/assets/CountDownLatchCyclicBarrier.html-bed56b1e.js" as="script"><link rel="prefetch" href="/assets/HashMap.html-d610cc00.js" as="script"><link rel="prefetch" href="/assets/cas.html-d6dfecf6.js" as="script"><link rel="prefetch" href="/assets/requestMerge.html-82cf201a.js" as="script"><link rel="prefetch" href="/assets/singleton.html-cf4c08d0.js" as="script"><link rel="prefetch" href="/assets/synchronizedUp.html-d224e372.js" as="script"><link rel="prefetch" href="/assets/synchronizedvolatile.html-eb96ee32.js" as="script"><link rel="prefetch" href="/assets/WhyIHateFrameworks.html-0fa5854a.js" as="script"><link rel="prefetch" href="/assets/cannotUnderstand.html-1ff295cc.js" as="script"><link rel="prefetch" href="/assets/grandHistory.html-f6a158e3.js" as="script"><link rel="prefetch" href="/assets/mofish.html-a13d71b3.js" as="script"><link rel="prefetch" href="/assets/netren.html-5a044ef1.js" as="script"><link rel="prefetch" href="/assets/qingdao.html-d7e303e4.js" as="script"><link rel="prefetch" href="/assets/traffickingAnxiety.html-e48d5ad0.js" as="script"><link rel="prefetch" href="/assets/RedisAcid.html-378cb45a.js" as="script"><link rel="prefetch" href="/assets/StringLowLevel.html-03e3e440.js" as="script"><link rel="prefetch" href="/assets/deserialization.html-7d173abc.js" as="script"><link rel="prefetch" href="/assets/forCircle.html-a47b5d36.js" as="script"><link rel="prefetch" href="/assets/genericType.html-b7fac234.js" as="script"><link rel="prefetch" href="/assets/stringappend.html-4f217fec.js" as="script"><link rel="prefetch" href="/assets/MyBatisExt.html-3c8dd628.js" as="script"><link rel="prefetch" href="/assets/executeProcess.html-c20ae117.js" as="script"><link rel="prefetch" href="/assets/interceptor.html-cfec9e59.js" as="script"><link rel="prefetch" href="/assets/join.html-50d44b63.js" as="script"><link rel="prefetch" href="/assets/multiTenancy.html-02512cbe.js" as="script"><link rel="prefetch" href="/assets/multiTenancyAdvanced.html-5bbf463d.js" as="script"><link rel="prefetch" href="/assets/BatchSqlOptimize.html-5d853304.js" as="script"><link rel="prefetch" href="/assets/MysqlBinlogJava.html-03c38ea3.js" as="script"><link rel="prefetch" href="/assets/ShardingSphere.html-52b251b9.js" as="script"><link rel="prefetch" href="/assets/hideColumns.html-10d0455b.js" as="script"><link rel="prefetch" href="/assets/rmrf.html-c9853a85.js" as="script"><link rel="prefetch" href="/assets/transaction.html-97f28403.js" as="script"><link rel="prefetch" href="/assets/BeanCopy.html-dd3c89c1.js" as="script"><link rel="prefetch" href="/assets/ConfigurationCenter.html-42676ad8.js" as="script"><link rel="prefetch" href="/assets/DockerMining.html-f05b9e76.js" as="script"><link rel="prefetch" href="/assets/GuavaMap.html-4ec4501c.js" as="script"><link rel="prefetch" href="/assets/HystrixRateLimite.html-0d9e647a.js" as="script"><link rel="prefetch" href="/assets/JavaQuasar.html-d71479e0.js" as="script"><link rel="prefetch" href="/assets/NettyChat.html-2c7f987a.js" as="script"><link rel="prefetch" href="/assets/NettyRPC.html-4cc02bfa.js" as="script"><link rel="prefetch" href="/assets/Postman.html-c3e32b02.js" as="script"><link rel="prefetch" href="/assets/XxlJobModify.html-15b01d63.js" as="script"><link rel="prefetch" href="/assets/ZookeeperDistributedLock.html-bee0c40c.js" as="script"><link rel="prefetch" href="/assets/Cluster.html-8bd04a0e.js" as="script"><link rel="prefetch" href="/assets/RESP2.html-cc8ab89b.js" as="script"><link rel="prefetch" href="/assets/Redis6ClientSideCache.html-5c9024cc.js" as="script"><link rel="prefetch" href="/assets/RedisPlusCaffeine.html-d2fe8f5d.js" as="script"><link rel="prefetch" href="/assets/RedissonCloseOrder.html-c4294d8c.js" as="script"><link rel="prefetch" href="/assets/SpringImplementCaffeinePlusRedis.html-c62f93c0.js" as="script"><link rel="prefetch" href="/assets/WindowsCompileRedis.html-308f8173.js" as="script"><link rel="prefetch" href="/assets/clientSideCaching.html-26b9f66f.js" as="script"><link rel="prefetch" href="/assets/distribute.html-ec666c2e.js" as="script"><link rel="prefetch" href="/assets/extendDataType.html-0b0fc73c.js" as="script"><link rel="prefetch" href="/assets/guard.html-18f30789.js" as="script"><link rel="prefetch" href="/assets/mastersSlave.html-787518d3.js" as="script"><link rel="prefetch" href="/assets/threePro.html-d9c3cb1b.js" as="script"><link rel="prefetch" href="/assets/InitializateBean.html-425f6b22.js" as="script"><link rel="prefetch" href="/assets/SpringBootYmlParse.html-5ec7004e.js" as="script"><link rel="prefetch" href="/assets/circleDependency.html-00bd5113.js" as="script"><link rel="prefetch" href="/assets/collectAutowired.html-06deda2c.js" as="script"><link rel="prefetch" href="/assets/containerInit.html-e1611682.js" as="script"><link rel="prefetch" href="/assets/processor.html-70d92739.js" as="script"><link rel="prefetch" href="/assets/ymlRead.html-e96529f9.js" as="script"><link rel="prefetch" href="/assets/zeroConfig.html-9b4b69e9.js" as="script"><link rel="prefetch" href="/assets/Eureka.html-9cb51a00.js" as="script"><link rel="prefetch" href="/assets/Feign.html-b7921857.js" as="script"><link rel="prefetch" href="/assets/Ribbon.html-843b0937.js" as="script"><link rel="prefetch" href="/assets/Seata.html-8c69b308.js" as="script"><link rel="prefetch" href="/assets/SeataTCC.html-419525f0.js" as="script"><link rel="prefetch" href="/assets/SentinelRulePersistence.html-7a1d8115.js" as="script"><link rel="prefetch" href="/assets/SentinelUse.html-153b33c8.js" as="script"><link rel="prefetch" href="/assets/tokenOptimize.html-e73f8eaa.js" as="script"><link rel="prefetch" href="/assets/authLogin.html-6a17374b.js" as="script"><link rel="prefetch" href="/assets/payment.html-5801e14d.js" as="script"><link rel="prefetch" href="/assets/refund.html-422629af.js" as="script"><link rel="prefetch" href="/assets/404.html-7eab5a9a.js" as="script"><link rel="prefetch" href="/assets/index.html-2e65b017.js" as="script"><link rel="prefetch" href="/assets/index.html-cd91088a.js" as="script"><link rel="prefetch" href="/assets/index.html-d58cbf6e.js" as="script"><link rel="prefetch" href="/assets/index.html-711ee22a.js" as="script"><link rel="prefetch" href="/assets/index.html-b2f19ae8.js" as="script"><link rel="prefetch" href="/assets/index.html-876ec228.js" as="script"><link rel="prefetch" href="/assets/index.html-f485fa23.js" as="script"><link rel="prefetch" href="/assets/index.html-c2482399.js" as="script"><link rel="prefetch" href="/assets/index.html-3da72fa3.js" as="script"><link rel="prefetch" href="/assets/index.html-cb444a2f.js" as="script"><link rel="prefetch" href="/assets/index.html-8809f2d1.js" as="script"><link rel="prefetch" href="/assets/index.html-8a530847.js" as="script"><link rel="prefetch" href="/assets/index.html-f7f05922.js" as="script"><link rel="prefetch" href="/assets/index.html-e672dad0.js" as="script"><link rel="prefetch" href="/assets/auto-ba5ecab5.js" as="script"><link rel="prefetch" href="/assets/index-b03bef79.js" as="script"><link rel="prefetch" href="/assets/flowchart-35969cab.js" as="script"><link rel="prefetch" href="/assets/mermaid.core-00d91001.js" as="script"><link rel="prefetch" href="/assets/highlight.esm-a794bb63.js" as="script"><link rel="prefetch" href="/assets/markdown.esm-d92a2fc9.js" as="script"><link rel="prefetch" href="/assets/math.esm-70a288c8.js" as="script"><link rel="prefetch" href="/assets/notes.esm-224f94d9.js" as="script"><link rel="prefetch" href="/assets/reveal.esm-e5069ce0.js" as="script"><link rel="prefetch" href="/assets/search.esm-2c3fba7d.js" as="script"><link rel="prefetch" href="/assets/zoom.esm-b83b91d0.js" as="script"><link rel="prefetch" href="/assets/VuePlayground-ddb6f4a6.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-6e6cbe40.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">跳至主要內容</a><!--]--><div class="theme-container has-toc"><!--[--><header class="navbar" id="navbar"><div class="navbar-start"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><a href="/" class="brand"><img class="logo" src="/logo64.jpg" alt="码农参上"><!----><span class="site-name hide-in-pad">码农参上</span></a><!--[--><!----><!--]--></div><div class="navbar-center"><!--[--><!----><!--]--><nav class="nav-links"><div class="nav-item hide-in-mobile"><a href="/" class="nav-link" aria-label="首页"><span class="font-icon icon iconfont icon-home" style=""></span>首页<!----></a></div><div class="nav-item hide-in-mobile"><a href="/spring/containerInit.html/" class="nav-link" aria-label="文章"><span class="font-icon icon iconfont icon-discover" style=""></span>文章<!----></a></div></nav><!--[--><!----><!--]--></div><div class="navbar-end"><!--[--><!----><!--]--><!----><div class="nav-item"><a class="repo-link" href="https://github.com/trunks2008" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!----><!--[--><!----><!--]--><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside class="sidebar" id="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="font-icon icon iconfont icon-leaf" style=""></span><span class="title">Spring</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable active"><span class="font-icon icon iconfont icon-workingDirectory" style=""></span><span class="title">Redis</span><span class="arrow down"></span></button><ul class="sidebar-links"><li><!--[--><a href="/redis/RedisPlusCaffeine.html" class="nav-link sidebar-link sidebar-page" aria-label="Redis+Caffeine两级缓存，让访问速度纵享丝滑"><span class="font-icon icon iconfont icon-page" style=""></span>Redis+Caffeine两级缓存，让访问速度纵享丝滑<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/redis/SpringImplementCaffeinePlusRedis.html" class="nav-link sidebar-link sidebar-page" aria-label="基于Spring接口，集成Caffeine+Redis两级缓存"><span class="font-icon icon iconfont icon-page" style=""></span>基于Spring接口，集成Caffeine+Redis两级缓存<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/redis/threePro.html" class="nav-link sidebar-link sidebar-page" aria-label="Redis缓存三大问题，一次解决"><span class="font-icon icon iconfont icon-page" style=""></span>Redis缓存三大问题，一次解决<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/redis/mastersSlave.html" class="nav-link sidebar-link sidebar-page" aria-label="Redis主从复制架构搭建"><span class="font-icon icon iconfont icon-page" style=""></span>Redis主从复制架构搭建<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/redis/guard.html" class="nav-link sidebar-link sidebar-page" aria-label="Redis哨兵搭建与原理分析"><span class="font-icon icon iconfont icon-page" style=""></span>Redis哨兵搭建与原理分析<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/redis/Cluster.html" class="nav-link sidebar-link sidebar-page" aria-label="Redis Cluster高可用集群搭建"><span class="font-icon icon iconfont icon-page" style=""></span>Redis Cluster高可用集群搭建<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/redis/distribute.html" class="nav-link sidebar-link sidebar-page" aria-label="Redis实现分布式锁"><span class="font-icon icon iconfont icon-page" style=""></span>Redis实现分布式锁<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/redis/RedissonCloseOrder.html" class="nav-link sidebar-link sidebar-page" aria-label="使用Redisson优雅关闭订单"><span class="font-icon icon iconfont icon-page" style=""></span>使用Redisson优雅关闭订单<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/redis/RESP2.html" class="nav-link sidebar-link sidebar-page" aria-label="Redis：我是如何与客户端进行通信的"><span class="font-icon icon iconfont icon-page" style=""></span>Redis：我是如何与客户端进行通信的<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/redis/extendDataType.html" class="nav-link sidebar-link sidebar-page" aria-label="Redis 扩展数据类型详解"><span class="font-icon icon iconfont icon-page" style=""></span>Redis 扩展数据类型详解<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/redis/WindowsCompileRedis.html" class="nav-link sidebar-link sidebar-page" aria-label="手摸手教你在Windows环境下运行Redis6.x"><span class="font-icon icon iconfont icon-page" style=""></span>手摸手教你在Windows环境下运行Redis6.x<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-current="page" href="/redis/RESP3.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" aria-label="Redis6通信协议升级至RESP3，一口气看完13种新数据类型"><span class="font-icon icon iconfont icon-page" style=""></span>Redis6通信协议升级至RESP3，一口气看完13种新数据类型<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/redis/RESP3.html#继承resp-v2的类型" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="继承RESP v2的类型"><!---->继承RESP v2的类型<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/redis/RESP3.html#simple-string" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Simple string"><!---->Simple string<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/redis/RESP3.html#simple-error" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Simple error"><!---->Simple error<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/redis/RESP3.html#number" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Number"><!---->Number<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/redis/RESP3.html#blob-string" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Blob string"><!---->Blob string<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/redis/RESP3.html#array" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Array"><!---->Array<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/redis/RESP3.html#resp3中新的类型" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="RESP3中新的类型"><!---->RESP3中新的类型<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/redis/RESP3.html#_1、null" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1、Null"><!---->1、Null<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/redis/RESP3.html#_2、double" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2、Double"><!---->2、Double<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/redis/RESP3.html#_3、boolean" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3、Boolean"><!---->3、Boolean<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/redis/RESP3.html#_4、blob-error" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4、Blob error"><!---->4、Blob error<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/redis/RESP3.html#_5、verbatim-string" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="5、Verbatim string"><!---->5、Verbatim string<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/redis/RESP3.html#_6、big-number" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="6、Big number"><!---->6、Big number<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/redis/RESP3.html#_7、aggregate-data-types" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="7、Aggregate data types"><!---->7、Aggregate data types<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/redis/RESP3.html#_8、map" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="8、Map"><!---->8、Map<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/redis/RESP3.html#_9、set" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="9、Set"><!---->9、Set<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/redis/RESP3.html#_10、attribute" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="10、Attribute"><!---->10、Attribute<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/redis/RESP3.html#_11、push" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="11、Push"><!---->11、Push<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/redis/RESP3.html#_12、stream" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="12、Stream"><!---->12、Stream<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/redis/RESP3.html#_13、hello" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="13、HELLO"><!---->13、HELLO<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/redis/RESP3.html#总结" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="总结"><!---->总结<!----></a><ul class="sidebar-sub-headers"></ul></li></ul><!--]--></li><li><!--[--><a href="/redis/clientSideCaching.html" class="nav-link sidebar-link sidebar-page" aria-label="引入『客户端缓存』，Redis6算是把缓存玩明白了…"><span class="font-icon icon iconfont icon-page" style=""></span>引入『客户端缓存』，Redis6算是把缓存玩明白了…<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/redis/Redis6ClientSideCache.html" class="nav-link sidebar-link sidebar-page" aria-label="实战派 | Java项目中玩转Redis6.0客户端缓存！"><span class="font-icon icon iconfont icon-page" style=""></span>实战派 | Java项目中玩转Redis6.0客户端缓存！<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="font-icon icon iconfont icon-animation" style=""></span><span class="title">动图图解</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="font-icon icon iconfont icon-asynchronous" style=""></span><span class="title">并发编程</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="font-icon icon iconfont icon-discover" style=""></span><span class="title">Spring Cloud</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="font-icon icon iconfont icon-java" style=""></span><span class="title">Java进阶</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="font-icon icon iconfont icon-mysql" style=""></span><span class="title">MySql</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="font-icon icon iconfont icon-grid" style=""></span><span class="title">MyBatis</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="font-icon icon iconfont icon-profile" style=""></span><span class="title">面试扩展</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="font-icon icon iconfont icon-creative" style=""></span><span class="title">项目实战</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="font-icon icon iconfont icon-anonymous" style=""></span><span class="title">认证鉴权</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="font-icon icon iconfont icon-emmet" style=""></span><span class="title">机器学习</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="font-icon icon iconfont icon-emoji" style=""></span><span class="title">荒腔走板</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="font-icon icon iconfont icon-wechat" style=""></span><span class="title">微信开发</span><span class="arrow end"></span></button><!----></section></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><span class="font-icon icon iconfont icon-page" style=""></span>Redis6通信协议升级至RESP3，一口气看完13种新数据类型</h1><div class="page-info"><span class="page-author-info" aria-label="作者🖊" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><span class="page-author-item">Hydra</span></span><span property="author" content="Hydra"></span></span><!----><span class="page-date-info" aria-label="写作日期📅" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2022-04-21T00:00:00.000Z"></span><!----><span class="page-reading-time-info" aria-label="阅读时间⌛" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>大约 16 分钟</span><meta property="timeRequired" content="PT16M"></span><!----><span class="page-tag-info" aria-label="标签🏷" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><span class="page-tag-item tag2" role>RESP3</span><span class="page-tag-item tag3" role>Redis</span><meta property="keywords" content="RESP3,Redis"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><!--[--><!----><!--]--><div class="toc-header">此页内容<button class="print-button" title="打印"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/redis/RESP3.html#继承resp-v2的类型" class="router-link-active router-link-exact-active toc-link level2">继承RESP v2的类型</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/redis/RESP3.html#simple-string" class="router-link-active router-link-exact-active toc-link level3">Simple string</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/redis/RESP3.html#simple-error" class="router-link-active router-link-exact-active toc-link level3">Simple error</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/redis/RESP3.html#number" class="router-link-active router-link-exact-active toc-link level3">Number</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/redis/RESP3.html#blob-string" class="router-link-active router-link-exact-active toc-link level3">Blob string</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/redis/RESP3.html#array" class="router-link-active router-link-exact-active toc-link level3">Array</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/redis/RESP3.html#resp3中新的类型" class="router-link-active router-link-exact-active toc-link level2">RESP3中新的类型</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/redis/RESP3.html#_1、null" class="router-link-active router-link-exact-active toc-link level3">1、Null</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/redis/RESP3.html#_2、double" class="router-link-active router-link-exact-active toc-link level3">2、Double</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/redis/RESP3.html#_3、boolean" class="router-link-active router-link-exact-active toc-link level3">3、Boolean</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/redis/RESP3.html#_4、blob-error" class="router-link-active router-link-exact-active toc-link level3">4、Blob error</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/redis/RESP3.html#_5、verbatim-string" class="router-link-active router-link-exact-active toc-link level3">5、Verbatim string</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/redis/RESP3.html#_6、big-number" class="router-link-active router-link-exact-active toc-link level3">6、Big number</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/redis/RESP3.html#_7、aggregate-data-types" class="router-link-active router-link-exact-active toc-link level3">7、Aggregate data types</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/redis/RESP3.html#_8、map" class="router-link-active router-link-exact-active toc-link level3">8、Map</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/redis/RESP3.html#_9、set" class="router-link-active router-link-exact-active toc-link level3">9、Set</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/redis/RESP3.html#_10、attribute" class="router-link-active router-link-exact-active toc-link level3">10、Attribute</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/redis/RESP3.html#_11、push" class="router-link-active router-link-exact-active toc-link level3">11、Push</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/redis/RESP3.html#_12、stream" class="router-link-active router-link-exact-active toc-link level3">12、Stream</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/redis/RESP3.html#_13、hello" class="router-link-active router-link-exact-active toc-link level3">13、HELLO</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/redis/RESP3.html#总结" class="router-link-active router-link-exact-active toc-link level2">总结</a></li><!----><!--]--></ul></div><!--[--><!----><!--]--></aside></div><!----><div class="theme-hope-content"><!-- more --><p>在前面的文章 <code>Redis：我是如何与客户端进行通信的</code>中，我们介绍过RESP V2版本协议的规范，RESP的全程是<code>Redis Serialization Protocol</code>，基于这个实现简单且解析性能优秀的通信协议，Redis的服务端与客户端可以通过底层命令的方式进行数据的通信。</p><p>随着Redis版本的不断更新以及功能迭代，RESP V2协议开始渐渐无法满足新的需求，为了适配在Redis6.0中出现的一些新功能，在它的基础上发展出了全新的下一代RESP3协议。</p><p>下面我们先来回顾一下继承自RESP V2的5种数据返回类型，在了解这些类型的局限性后，再来看看RESP3中新的数据返回类型都在什么地方做出了改进。</p><h2 id="继承resp-v2的类型" tabindex="-1"><a class="header-anchor" href="#继承resp-v2的类型" aria-hidden="true">#</a> 继承RESP v2的类型</h2><p>首先，协议中数据的请求格式与RESP V2完全相同，请求的格式如下：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>*<span class="token operator">&lt;</span>参数数量<span class="token operator">&gt;</span> CRLF
$<span class="token operator">&lt;</span>参数1的字节长度<span class="token operator">&gt;</span> CRLF
<span class="token operator">&lt;</span>参数1的数据<span class="token operator">&gt;</span> CRLF
$<span class="token operator">&lt;</span>参数2的字节长度<span class="token operator">&gt;</span> CRLF
<span class="token operator">&lt;</span>参数2的数据<span class="token operator">&gt;</span> CRLF
<span class="token punctuation">..</span>.
$<span class="token operator">&lt;</span>参数N的字节长度<span class="token operator">&gt;</span> CRLF
<span class="token operator">&lt;</span>参数N的数据<span class="token operator">&gt;</span> CRLF
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>每行末尾的<code>CRLF</code>转换成程序语言是<code>\r\n</code>，也就是回车加换行。以<code>set name hydra</code>这条命令为例，转换过程及转换后的结果如下：</p><figure><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/24cc676508a24f2f8a38bce097c95c57~tplv-k3u1fbpfcp-zoom-1.image" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>在了解了发送的协议后，下面对不同类型的回复进行测试。这一过程如何进行模拟呢？在前面的文章中，我们是在java代码中通过<code>Socket</code>连接redis服务，发送数据并收到返回结果来模拟这一协议。</p><p>不过我们今天采用一种更为简单的方式，直接在命令行下使用<code>telnet</code>进行连接就可以了，以我本机启动的redis为例，直接输入<code>telnet 127.0.0.1 6379</code>就可以连接到redis服务了。之后再将包含换行的指令一次性拷贝到命令行，然后回车，就能够收到来自Redis服务的回复了：</p><figure><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c219cfed2d474883901acbc4e60b6493~tplv-k3u1fbpfcp-zoom-1.image" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>下面先来看看继承自RESP V2的5种返回格式，为了统一命名规范，介绍中均采用RESP3官方文档中的新的名称来替代RESP V2中的旧命名，例如不再使用旧的<strong>批量回复</strong>、<strong>多条批量回复</strong>等类型名称。</p><h3 id="simple-string" tabindex="-1"><a class="header-anchor" href="#simple-string" aria-hidden="true">#</a> Simple string</h3><p>表示简单字符串回复，它只有一行回复，回复的内容以<code>+</code>作为开头，不允许换行，并以<code>\r\n</code>结束。有很多指令在执行成功后只会回复一个<code>OK</code>，使用的就是这种格式，能够有效地将传输、解析的开销降到最低。</p><p>还是以上面的<code>set</code>指令为例，发送请求：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>*3
<span class="token variable">$3</span>
<span class="token builtin class-name">set</span>
<span class="token variable">$4</span>
name
<span class="token variable">$5</span>
hydra
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>收到回复：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>+OK<span class="token punctuation">\</span>r<span class="token punctuation">\</span>n
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="simple-error" tabindex="-1"><a class="header-anchor" href="#simple-error" aria-hidden="true">#</a> Simple error</h3><p>错误回复，它可以看做简单字符串回复的变种形式，它们之间的格式也非常类似，区别只有第一个字符是以-作为开头，错误回复的内容通常是错误类型及对错误描述的字符串。错误回复出现在一些异常的场景，例如当发送了错误的指令、操作数的数量不对时，都会进行错误回复。</p><p>发送一条错误的指令：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>*1
<span class="token variable">$8</span>
Dr.Hydra
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>收到回复，提示错误信息：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token parameter variable">-ERR</span> unknown <span class="token builtin class-name">command</span> <span class="token variable"><span class="token variable">`</span>Dr.Hydra<span class="token variable">`</span></span>, with args beginning with:<span class="token punctuation">\</span>r<span class="token punctuation">\</span>n
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="number" tabindex="-1"><a class="header-anchor" href="#number" aria-hidden="true">#</a> Number</h3><p>整数回复，它的应用也非常广泛，它以<code>:</code>作为开头，以<code>\r\n</code>结束，用于返回一个整数。例如当执行<code>incr</code>后返回自增后的值，执行<code>llen</code>返回数组的长度，或者使用<code>exists</code>命令返回的0或1作为判断一个key是否存在的依据，这些都使用了整数回复。</p><p>发送一条查看数组长度的指令：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>*2
<span class="token variable">$4</span>
llen
<span class="token variable">$7</span>
myarray
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>收到回复：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>:4<span class="token punctuation">\</span>r<span class="token punctuation">\</span>n
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="blob-string" tabindex="-1"><a class="header-anchor" href="#blob-string" aria-hidden="true">#</a> Blob string</h3><p>多行字符串的回复，也被叫做批量回复，在RESP V2中将它称为<code>Bulk String</code>。以<code>$</code>作为开头，后面是发送的字节长度，然后是<code>\r\n</code>，然后发送实际的数据，最终以<code>\r\n</code>结束。如果要回复的数据不存在，那么回复长度为-1。</p><p>发送一条<code>get</code>命令请求：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>*2
<span class="token variable">$3</span>
get
<span class="token variable">$4</span>
name
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>收到回复：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token variable">$5</span><span class="token punctuation">\</span>r<span class="token punctuation">\</span>n
hydra<span class="token punctuation">\</span>r<span class="token punctuation">\</span>n
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="array" tabindex="-1"><a class="header-anchor" href="#array" aria-hidden="true">#</a> Array</h3><p>可以理解为RESP V2中的<strong>多条批量回复</strong>，当服务端要返回多个值时，例如返回一些元素的集合时，就会使用<code>Array</code>。它以<code>*</code>作为开头，后面是返回元素的个数，之后再跟随多个上面的<code>Blob String</code>。</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>*4
<span class="token variable">$6</span>
lrange
<span class="token variable">$7</span>
myarray
<span class="token variable">$1</span>
<span class="token number">0</span>
<span class="token variable">$2</span>
<span class="token parameter variable">-1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>收到回复，包含了集合中的4个元素：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>*4
<span class="token variable">$1</span>
<span class="token number">1</span>
<span class="token variable">$1</span>
<span class="token number">2</span>
<span class="token variable">$1</span>
<span class="token number">2</span>
<span class="token variable">$2</span>
<span class="token number">32</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这5种继承自RESP V2协议的返回数据类型的简单回顾到此结束，下面我们来开启RESP3协议新特性的探索之旅。</p><h2 id="resp3中新的类型" tabindex="-1"><a class="header-anchor" href="#resp3中新的类型" aria-hidden="true">#</a> RESP3中新的类型</h2><p>目前在Redis6.0.X版本中，仍然是默认使用的RESP V2协议，并且在兼容RESP V2的基础上，也同时也支持开启RESP3。估计在未来的某个版本，Redis可能会全面切换到RESP3，不过这么做的话对目前的Redis客户端连接工具会有不小的冲击，都需要根据协议内容进行底层通信的改造。</p><p>在使用<code>telnet</code>连接到redis服务后，先输入下面的命令来切换到RESP3版本的协议，至于<code>hello</code>命令的具体返回数据以及数据表示的意义，这里暂且略过，后面会具体来看。</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>hello <span class="token number">3</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>下面我们就来详细看看在RESP3中，除了保留上面的5种旧回复类型外，新增的13种通信返回数据类型，部分数据类型会配合示例进行演示。<strong>为了看起来更加简洁，下面的演示例子发送命令均使用原始命令，不再转化为协议格式，并且省略数据返回结果中每行结束的</strong><code>\r\n</code><strong>！</strong></p><h3 id="_1、null" tabindex="-1"><a class="header-anchor" href="#_1、null" aria-hidden="true">#</a> 1、Null</h3><p>新协议中使用下划线字符后跟<code>CR</code>和<code>LF</code>字符来表示空值，也就是用<code>_\r\n</code>来替代原先的单个空值的返回<code>$-1</code>。例如在使用<code>get</code>命令查找一个不存在的key时：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>get hydra
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>RESP V2返回：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>$-1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>RESP3返回：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>_
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_2、double" tabindex="-1"><a class="header-anchor" href="#_2、double" aria-hidden="true">#</a> 2、Double</h3><p>浮点数返回时以逗号开头，格式为 <code>,&lt;floating-point-number&gt;\r\n</code>，使用<code>zset score key member</code>获取分数的命令来进行测试：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>zscore fruit apple
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>RESP V2返回时使用的是<code>Bulk String</code>的格式：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token variable">$18</span>
<span class="token number">5.6600000000000001</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>RESP3返回格式：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>,5.6600000000000001
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_3、boolean" tabindex="-1"><a class="header-anchor" href="#_3、boolean" aria-hidden="true">#</a> 3、Boolean</h3><p>布尔类型的数据返回值，其中true被表示为<code>#t\r\n</code>，而false被表示为<code>#f\r\n</code>。不过Hydra暂时没有找到返回布尔类型结果的例子，即使是用lua脚本直接返回布尔类型也无法实现。</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">eval</span> <span class="token string">&quot;return true&quot;</span> <span class="token number">0</span> 
<span class="token builtin class-name">eval</span> <span class="token string">&quot;return false&quot;</span> <span class="token number">0</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>上面的lua脚本在返回true时结果为<code>:1\r\n</code>，返回false时结果为<code>_\r\n</code>，这是因为lua中布尔类型的true会转换为redis中的整数回复1，而false类型会转换成<code>Nil Bulk</code>。至于有哪些指令能够返回布尔类型的数据，有了解的小伙伴可以给我留言补充。</p><h3 id="_4、blob-error" tabindex="-1"><a class="header-anchor" href="#_4、blob-error" aria-hidden="true">#</a> 4、Blob error</h3><p>与字符串类型比较相似，它的格式为<code>!&lt;length&gt;\r\n&lt;bytes&gt;\r\n</code>，但是与简单错误类型一样，开头使用<code>!</code>表示返回的是一段错误信息描述。例如错误<code>SYNTAX invalid syntax</code>会按照下面的格式返回：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token operator">!</span><span class="token number">21</span>
SYNTAX invalid syntax
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5、verbatim-string" tabindex="-1"><a class="header-anchor" href="#_5、verbatim-string" aria-hidden="true">#</a> 5、Verbatim string</h3><p><code>Verbatim string</code>也表示一个字符串格式，与<code>Blob String</code>非常相似，但是使用<code>=</code>开头替换了<code>$</code>，另外之后的三个字节提供了有关字符串格式的信息，例如<code>txt</code>表示纯文本，<code>mkd</code>表示markdown格式，第四个字节则固定为 <code>:</code>。这种格式适用于在没有任何转义或过滤的情况下显示给用户。</p><p>使用延时事件统计与分析指令进行测试，发送：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>latency doctor
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>RESP2返回的数据还是<code>Blob String</code>格式：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token variable">$196</span>
Dave, no latency spike was observed during the lifetime of this Redis instance, not <span class="token keyword">in</span> the slightest bit. I honestly think you ought to sit down calmly, take a stress pill, and think things over.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>RESP V3返回的数据采用了新的格式：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token operator">=</span><span class="token number">200</span>
txt:Dave, no latency spike was observed during the lifetime of this Redis instance, not <span class="token keyword">in</span> the slightest bit. I honestly think you ought to sit down calmly, take a stress pill, and think things over.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6、big-number" tabindex="-1"><a class="header-anchor" href="#_6、big-number" aria-hidden="true">#</a> 6、Big number</h3><p><code>Big number</code>类型用于返回非常大的整数数字，可以表示在有符号64位数字范围内的整数，包括正数或负数，但是需要注意不能含有小数部分。数据格式为<code>(&lt;big number&gt;\r\n</code>，以左括号开头，示例如下：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">(</span><span class="token number">3492890328409238509324850943850943825024385</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>注意，当<code>Big number</code>不可用时，客户端会返回一个字符串格式的数据。</p><h3 id="_7、aggregate-data-types" tabindex="-1"><a class="header-anchor" href="#_7、aggregate-data-types" aria-hidden="true">#</a> 7、Aggregate data types</h3><p>与前面我们介绍的给定数据类型的单个值不同，<code>Aggregate data types</code>可以理解为聚合数据类型。这也是RESP3的一个核心思想，要能够从协议和类型的角度，来描述不同语义的聚合数据类型。</p><p>聚合数据类型的格式如下，通常由聚合类型、元素个数以及具体的单一元素构成：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>&lt;aggregate-type-char&gt;&lt;numelements&gt;&lt;CR&gt;&lt;LF&gt;
... numelements other types ...
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>例如一个包含三个数字的数组<code>[1,2,3]</code>可以表示为：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>*3
:1
:2
:3
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>当然聚合数据类型中的元素可以是其他聚合数据类型，例如在数组中也可以嵌套包含其他数组（下面的内容包含了缩进方便理解）：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>*2
    *3
        :1
        <span class="token variable">$5</span>
        hello
        :2
    <span class="token comment">#f</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>上面的聚合数据类型所表示的数据为<code>[[1,&quot;hello&quot;,2],false]</code>。</p><h3 id="_8、map" tabindex="-1"><a class="header-anchor" href="#_8、map" aria-hidden="true">#</a> 8、Map</h3><p><code>Map</code>数据类型与数组比较类似，但是以<code>%</code>作为起始，后面是<code>Map</code>中键值对的数量，而不再是单个数据项的数量。它的数据内容是一个<strong>有序</strong>的键值对的数组，之后分行显示键值对的<code>key</code>和<code>value</code>，因此后面的数据行一定是偶数行。先看一下官方文档给出的例子，以下面的Json字符串为例：</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;first&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token property">&quot;second&quot;</span><span class="token operator">:</span><span class="token number">2</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>转换为<code>Map</code>类型后格式为下面的形式：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>%2
+first
:1
+second
:2
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>但是通过实验，Hydra发现了点有意思的东西，当我们发送一条<code>hgetall</code>的命令来请求哈希类型的数据时：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>hgetall user
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>RESP V2返回的数据仍然使用老的<code>Array</code>格式，符合我们的预期：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>*4
<span class="token variable">$4</span>
name
<span class="token variable">$5</span>
Hydra
<span class="token variable">$3</span>
age
<span class="token variable">$2</span>
<span class="token number">18</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>但是下面RESP3的数据返回却出乎我们的意料，可以看到虽然前面的<code>%2</code>表示使用了<code>Map</code>格式，但是后面并没有遵循官方文档给出的规范，除了开头的<code>%2</code>以外，其余部分与<code>Array</code>完全相同（）。</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>%2
<span class="token variable">$4</span>
name
<span class="token variable">$5</span>
Hydra
<span class="token variable">$3</span>
age
<span class="token variable">$2</span>
<span class="token number">18</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>关于实际传输数据与文档中给出示例的出入，Hydra有一点自己的猜测，放在最后总结部分。</p><h3 id="_9、set" tabindex="-1"><a class="header-anchor" href="#_9、set" aria-hidden="true">#</a> 9、Set</h3><p><code>Set</code>与<code>Array</code>类型非常相似，但是它的第一个字节使用<code>~</code>替代了<code>*</code>，它是一个无序的数据集合。还是先看一下官方文档中给出的示例，下面是一个包含了5个元素的集合类型数据，并且其中具体的数据类型可以不同：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>~<span class="token operator"><span class="token file-descriptor important">5</span>&lt;</span>CR<span class="token operator">&gt;</span><span class="token operator">&lt;</span>LF<span class="token operator">&gt;</span>
+orange<span class="token operator">&lt;</span>CR<span class="token operator">&gt;</span><span class="token operator">&lt;</span>LF<span class="token operator">&gt;</span>
+apple<span class="token operator">&lt;</span>CR<span class="token operator">&gt;</span><span class="token operator">&lt;</span>LF<span class="token operator">&gt;</span>
<span class="token comment">#t&lt;CR&gt;&lt;LF&gt;</span>
:10<span class="token operator"><span class="token file-descriptor important">0</span>&lt;</span>CR<span class="token operator">&gt;</span><span class="token operator">&lt;</span>LF<span class="token operator">&gt;</span>
:99<span class="token operator"><span class="token file-descriptor important">9</span>&lt;</span>CR<span class="token operator">&gt;</span><span class="token operator">&lt;</span>LF<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>下面使用<code>SMEMBERS</code>命令获取集合中的所有元素进行测试：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>SMEMBERS  myset
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>RESP V2返回时仍然使用<code>Array</code>格式：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>*3
<span class="token variable">$1</span>
a
<span class="token variable">$1</span>
c
<span class="token variable">$1</span>
b
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>RESP3的数据返回情况和<code>Map</code>比较类似，使用<code>~</code>开头，但是没有完全遵从协议中的格式：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>~3
<span class="token variable">$1</span>
a
<span class="token variable">$1</span>
c
<span class="token variable">$1</span>
b
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_10、attribute" tabindex="-1"><a class="header-anchor" href="#_10、attribute" aria-hidden="true">#</a> 10、Attribute</h3><p><code>Attribute</code>类型与<code>Map</code>类型非常相似，但是头一个字节使用<code>|</code>来代替了<code>%</code>，<code>Attribute</code>描述的数据内容比较像<code>Map</code>中的字典映射。客户端不应该将这个字典内容看做数据回复的一部分，而是当做增强回复内容的辅助数据。</p><p>在文档中提到，在未来某个版本的Redis中可能会出现这样一个功能，每次执行指令时都会打印访问的<code>key</code>的请求频率，这个值可能使用一个浮点数表示，那么在执行<code>MGET a b</code>时就可能会收到回复：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token operator">|</span><span class="token number">1</span>
    +key-popularity
    %2
        <span class="token variable">$1</span>
        a
        ,0.1923
        <span class="token variable">$1</span>
        b
        ,0.0012
*2
    :2039123
    :9543892
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在上面的数据回复中，实际中回复的数据应该是<code>[2039123,9543892]</code>，但是在前面附加了它们请求的属性，当读到这个<code>Attribute</code>类型数据后，应当继续读取后面的实际数据。</p><h3 id="_11、push" tabindex="-1"><a class="header-anchor" href="#_11、push" aria-hidden="true">#</a> 11、Push</h3><p><code>Push</code>数据类型是一种服务器向客户端发送的异步数据，它的格式与<code>Array</code>类型比较类似，但是以<code>&gt;</code>开头，接下来的数组中的第一个数据为字符串类型，表示服务器发送给客户端的推送数据是何种类型。数组中其他的数据也都包含自己的类型，需要按照协议中类型规范进行解析。</p><p>简单看一下文档中给出的示例，在执行<code>get key</code>命令后，可能会得到两个有效回复：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token operator">&gt;</span><span class="token number">4</span>
+pubsub
+message
+somechannel
+this is the message
<span class="token variable">$9</span>
Get-Reply
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在上面的这段回复中需要注意，收到的两个回复中第一个是推送数据的类型，第二个才是真正回复的数据内容。</p><p>注意！这里在文档中有一句提示：虽然下面的演示使用的是<code>Simple string</code>格式，但是在实际数据传输中使用的是<code>Blob string</code>格式。所以盲猜一波，上面的<code>Map</code>和<code>Set</code>也是同样的情况？</p><p>这里先简单铺垫一下<code>Push</code>回复类型在redis6中非常重要的一个使用场景<strong>客户端缓存</strong><code>client-side caching</code>，它允许将数据存储在本地应用中，当访问时不再需要访问redis服务端，但是其他客户端修改数据时需要通知当前客户端作废掉本地应用的客户端缓存，这时候就会用到<code>Push</code>类型的消息。</p><p>我们先在客户端A中执行下面的命令：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>client tracking on
get key1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>在客户端B中执行：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">set</span> key1 newValue
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>这时就会在客户端A中收到<code>Push</code>类型的消息，通知客户端缓存失效。在下面收到的消息中就包含了两部分，第一部分表示收到的消息类型为<code>invalidate</code>，第二部分则是需要作废的缓存<code>key1</code>：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token operator">&gt;</span><span class="token number">2</span>
<span class="token variable">$10</span>
invalidate
*1
<span class="token variable">$4</span>
key1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_12、stream" tabindex="-1"><a class="header-anchor" href="#_12、stream" aria-hidden="true">#</a> 12、Stream</h3><p>在前面介绍的类型中，返回的数据字符串一般都具有指定的长度，例如下面这样：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token variable">$1234</span><span class="token operator">&lt;</span>CR<span class="token operator">&gt;</span><span class="token operator">&lt;</span>LF<span class="token operator">&gt;</span>
<span class="token punctuation">..</span><span class="token punctuation">..</span> <span class="token number">1234</span> bytes of data here <span class="token punctuation">..</span>.<span class="token operator">&lt;</span>CR<span class="token operator">&gt;</span><span class="token operator">&lt;</span>LF<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>但是有时候需要将一段不知道长度的字符串数据从客户端传给服务器（或者反向传输）时，很明显这种格式无法使用，因此需要一种新的格式用来传送<strong>不确定长度</strong>的数据。</p><p>文档中提到，过去在服务端有一个私有扩展的数据格式，规范如下：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token variable">$EOF</span>:<span class="token operator">&lt;</span><span class="token number">40</span> bytes marker<span class="token operator">&gt;</span><span class="token operator">&lt;</span>CR<span class="token operator">&gt;</span><span class="token operator">&lt;</span>LF<span class="token operator">&gt;</span>
<span class="token punctuation">..</span>. any number of bytes of data here not containing the marker <span class="token punctuation">..</span>.
<span class="token operator">&lt;</span><span class="token number">40</span> bytes marker<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>它以<code>$EOF:</code>作为起始字节，然后是40字节的<code>marker</code>标识符，在<code>\r\n</code>后跟随的是真正的数据，结束后也是40字节的标识符。标识符以伪随机的方式生成，基本上不会与正常的数据发生冲突。</p><p>但是这种格式存在一定的局限性，主要问题就在于生成标识符以及解析标识符上，由于一些原因使得上面这种格式在实际使用中非常脆弱。因此最终在规范中提出了一种<strong>分块编码格式</strong>，举一个简单的例子，当需要发送事先不知道长度的字符串<code>Hello world</code>时：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token variable">$?</span>
<span class="token punctuation">;</span><span class="token number">4</span>
Hell
<span class="token punctuation">;</span><span class="token number">5</span>
o wor
<span class="token punctuation">;</span><span class="token number">2</span>
ld
<span class="token punctuation">;</span><span class="token number">0</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这种格式以<code>$?</code>开头，表示是一个不知道长度的分块编码格式，后面传输的数据数量没有限制，在最后以零长度的<code>;0</code>作为结束传输的标识。文档中提到，目前还没有命令会以这个格式来进行数据回复，但是会在后面的功能模块中实装这个协议。</p><h3 id="_13、hello" tabindex="-1"><a class="header-anchor" href="#_13、hello" aria-hidden="true">#</a> 13、HELLO</h3><p>在介绍RESP3的最开始，我们就在<code>telnet</code>中通过<code>hello 3</code>的命令来切换协议到V3版本。这个特殊的命令完成了两件事：</p><ul><li>它允许服务器与RESP V2版本向后兼容，也方便以后更加轻松的切换到RESP3</li><li><code>hello</code>命令可以返回有关服务器和协议的信息，以供客户端使用</li></ul><p><code>hello</code>命令的格式如下，可以看到除了协议版本号外，还可以指定用户名和密码：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>HELLO <span class="token operator">&lt;</span>protocol-version<span class="token operator">&gt;</span> <span class="token punctuation">[</span>AUTH <span class="token operator">&lt;</span>username<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>password<span class="token operator">&gt;</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><code>hello</code>命令的返回结果是前面介绍过的<code>Map</code>类型，仅仅在客户端和服务器建立连接的时候发送。</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>%7
<span class="token variable">$6</span>
server
<span class="token variable">$5</span>
redis
<span class="token variable">$7</span>
version
<span class="token variable">$6</span>
<span class="token number">6.0</span>.16
<span class="token variable">$5</span>
proto
:3
<span class="token variable">$2</span>
<span class="token function">id</span>
:18
<span class="token variable">$4</span>
mode
<span class="token variable">$10</span>
standalone
<span class="token variable">$4</span>
role
<span class="token variable">$6</span>
master
<span class="token variable">$7</span>
modules
*0
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>转换为我们可读的<code>Map</code>格式后，可以看到它返回的Redis服务端的一些信息：</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;server&quot;</span><span class="token operator">:</span><span class="token string">&quot;redis&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;version&quot;</span><span class="token operator">:</span><span class="token string">&quot;6.0.16&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;proto&quot;</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">,</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span><span class="token number">18</span><span class="token punctuation">,</span>
    <span class="token property">&quot;mode&quot;</span><span class="token operator">:</span><span class="token string">&quot;standalone&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;role&quot;</span><span class="token operator">:</span><span class="token string">&quot;master&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;modules&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="总结" tabindex="-1"><a class="header-anchor" href="#总结" aria-hidden="true">#</a> 总结</h2><p>在RESP V2中，通信协议还是比较简单，通信内容大多也都还是通过数组形式进行编码和发送，这种情况带来了很多不便，有很多情况需要根据操作命令的类型来判断返回的数据具体是什么类型，这无疑增加了客户端解析数据的难度与复杂度。</p><p>而在RESP3中，通过引入新的多种数据类型，通过起始字节的字符进行类型的区分编码，使客户端可以直接判断返回数据的类型，在相当大的程度上，减轻了解析的复杂度，提升了效率。</p><p>本文中对于新的返回数据类型，一部分给出了通信数据的示例，但还是有一些类型暂时没有找到合适的命令进行测试，有了解的小伙伴们可以给我补充。</p><p>另外对于<code>Map</code>和<code>Set</code>，实际传输的数据与官方文档给出的仍有一定出入，个人认为情况和<code>Push</code>相同，可能是官方文档中更多只偏向于演示，使用<code>Simple string</code>来代替了<code>Blob string</code>。</p><p>最后再啰嗦一句，说说协议的命名，新一代的协议名称就叫<code>RESP3</code>，而没有继承第二代的命名规范叫<code>RESP V3</code>，也不是<code>RESP version3</code>什么乱七八糟的，所以就不要纠结文中为啥一会是<code>RESP V2</code>，一会是<code>RESP3</code>这种不对称的命名了。</p><p>那么，这次的分享就到这里，我是Hydra，下篇文章再见。</p><p><strong>参考文档：</strong></p><blockquote><p><a href="https://github.com/redis/redis-doc/blob/master/docs/reference/protocol-spec.md" target="_blank" rel="noopener noreferrer">https://github.com/redis/redis-doc/blob/master/docs/reference/protocol-spec.md<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><a href="https://github.com/antirez/RESP3/blob/master/spec.md" target="_blank" rel="noopener noreferrer">https://github.com/antirez/RESP3/blob/master/spec.md<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><a href="https://redis.io/docs/reference/protocol-spec/#high-performance-parser-for-the-redis-protocol" target="_blank" rel="noopener noreferrer">https://redis.io/docs/reference/protocol-spec/#high-performance-parser-for-the-redis-protocol<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></blockquote></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/trunks2008/edit/main/demo/theme-docs/src/redis/RESP3.md" rel="noopener noreferrer" target="_blank" aria-label="Edit this page on GitHub" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->Edit this page on GitHub<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item git-info"><div class="update-time"><span class="label">上次编辑于: </span><!----></div><div class="contributors"><span class="label">贡献者: </span><!--[--><!--[--><span class="contributor" title="email: jialegeyou1111@163.com">trunks2008</span><!--]--><!--]--></div></div></footer><nav class="page-nav"><a href="/redis/WindowsCompileRedis.html" class="nav-link prev" aria-label="手摸手教你在Windows环境下运行Redis6.x"><div class="hint"><span class="arrow start"></span>上一页</div><div class="link"><span class="font-icon icon iconfont icon-page" style=""></span>手摸手教你在Windows环境下运行Redis6.x</div></a><a href="/redis/clientSideCaching.html" class="nav-link next" aria-label="引入『客户端缓存』，Redis6算是把缓存玩明白了…"><div class="hint">下一页<span class="arrow end"></span></div><div class="link">引入『客户端缓存』，Redis6算是把缓存玩明白了…<span class="font-icon icon iconfont icon-page" style=""></span></div></a></nav><!----><!----><!--]--></main><!--]--><footer class="footer-wrapper"><div class="footer">有趣、深入、直接，与你聊聊技术</div><div class="copyright">Copyright © 2023 Hydra</div></footer></div><!--]--><!----><!--]--></div>
    <script type="module" src="/assets/app-ba0ddab3.js" defer></script>
  </body>
</html>
